## 附录 B：运算符和符号

本附录包含 Rust 语法的术语表，包括运算符和
其他单独出现或在路径、泛型上下文中出现的符号，
特征边界、宏、属性、注释、元组和括号。

### 运营商

表 B-1 包含 Rust 中的运算符，这是运算符如何使用的示例
出现在上下文中，简短的解释，以及该运算符是否是
可过载。如果运算符是可重载的，则要使用的相关特征
重载列出的运算符。

<span class="caption">表 B-1：运算符</span>

|操作员|示例|说明|可超载吗？  |
| ---------------------------------- | ------------------------------------------------------- | ---------------------------------------------------------------------------------- | -------------- |
| `!` | `ident!(...)`、`ident!{...}`、`ident![...]` |宏观拓展|                |
| `!` | `!expr` |按位或逻辑补 | `Not` |
| `!=` | `expr != expr` |不等式比较 | `PartialEq` |
| `%` | `expr % expr` |算术余数 | `Rem` |
| `%=` | `var %= expr` |算术余数和赋值 | `RemAssign` |
| `&` | `&expr`、`&mut expr` |借用|                |
| `&` | `&type`、`&mut type`、`&'a type`、`&'a mut type` |借用指针类型|                |
| `&` | `expr & expr` |按位与 | `BitAnd` |
| `&=` | `var &= expr` |按位与和赋值 | `BitAndAssign` |
| `&&` | `expr && expr` |短路逻辑 AND |                |
| `*` | `expr * expr` |算术乘法 | `Mul` |
| `*=` | `var *= expr` |算术乘法和赋值| `MulAssign` |
| `*` | `*expr` |解除引用| `Deref` |
| `*`                       | `*const type`, `*mut type`                              | Raw pointer                                                           |                |
| `+` | `trait + trait`、`'a + trait` |复合类型约束 |                |
| `+` | `expr + expr` |算术加法 | `Add` |
| `+=` | `var += expr` |算术加法和赋值| `AddAssign` |
| `,` | `expr, expr` |参数和元素分隔符 |                |
| `-` | `- expr` |算术否定| `Neg` |
| `-` | `expr - expr` |算术减法| `Sub` |
| `-=` | `var -= expr` |算术减法和赋值| `SubAssign` |
| `->` | `fn(...) -> type`，<代码>&vert;...&vert; -> 类型</code> |函数和闭包返回类型 |                |
| `.` | `expr.ident` |现场访问|                |
| `.` | `expr.ident(expr, ...)` |方法调用 |                |
| `.` | `expr.0`、`expr.1` 等 |元组索引 |                |
| `..` | `..`、`expr..`、`..expr`、`expr..expr` |右独占范围文字 | `PartialOrd` |
| `..=` | `..=expr`、`expr..=expr` |右包含范围文字 | `PartialOrd` |
| `..` | `..expr` |结构体字面量更新语法 |                |
| `..` | `variant(x, ..)`、`struct_type { x, .. }` | “其余”图案装订 |                |
| `...` | `expr...expr` | （已弃用，请使用 `..=` 代替）在模式中：包含范围模式 |                |
| `/` | `expr / expr` |算术除法| `Div` |
| `/=` | `var /= expr` |算术除法和赋值| `DivAssign` |
| `:` | `pat: type`、`ident: type` |限制条件|                |
| `:` | `ident: expr` |结构体字段初始值设定项 |                |
| `:` | `'a: loop {...}` |循环标签|                |
| `;` | `expr;` |语句和项目终止符 |                |
| `;` | `[...; len]` |固定大小数组语法的一部分 |                |
| `<<` | `expr << expr` |左移| `Shl` |
| `<<=` | `var <<= expr` |左移和赋值 | `ShlAssign` |
| `<` | `expr < expr` |小于比较| `PartialOrd` |
| `<=` | `expr <= expr` |小于或等于比较 | `PartialOrd` |
| `=` | `var = expr`、`ident = type` |赋值/等价|                |
| `==` | `expr == expr` |平等比较| `PartialEq` |
| `=>` | `pat => expr` |匹配arm语法的一部分|                |
| `>` | `expr > expr` |大于比较| `PartialOrd` |
| `>=` | `expr >= expr` |大于或等于比较 | `PartialOrd` |
| `>>` | `expr >> expr` |右移| `Shr` |
| `>>=` | `var >>= expr` |右移和赋值 | `ShrAssign` |
| `@` | `ident @ pat` |图案装订|                |
| `^` | `expr ^ expr` |按位异或 | `BitXor` |
| `^=` | `var ^= expr` |按位异或和赋值 | `BitXorAssign` |
| <code>&vert;</code> | <code>拍拍拍拍</code> |模式替代品|                |
| <code>&vert;</code> | <code>expr &vert;表达式</code> |按位或 | `BitOr` |
| <code>&vert;=</code> | <code>var &vert;= expr</code> |按位或和赋值 | `BitOrAssign` |
| <code>&vert;&vert;</code> | <code>expr &vert;&vert;表达式</code> |短路逻辑或|                |
| `?` | `expr?` |错误传播 |                |

### 非运算符符号

下表包含所有不用作运算符的符号；那
也就是说，它们的行为不像函数或方法调用。

表 B-2 显示了单独出现且在各种情况下有效的符号
地点。

<span class="caption">表 B-2：独立语法</span>

|符号|说明|
| ---------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------- |
| `'ident` |命名生命周期或循环标签 |
|紧随其后的数字`u8`、`i32`、`f64`、`usize` 等 |特定类型的数字文字 |
| `"..."` |字符串文字 |
| `r"..."`、`r#"..."#`、`r##"..."##` 等 |原始字符串文字；未处理转义字符 |
| `b"..."` |字节字符串文字；构造一个字节数组而不是字符串 |
| `br"..."`、`br#"..."#`、`br##"..."##` 等 |原始字节字符串文字；原始字符串和字节字符串文字的组合 |
| `'...'` |字符文字|
| `b'...'` | ASCII 字节文字 |
| <代码>&vert;...&vert;表达式</code> |关闭 |
| `!` |始终为空的底部类型，用于发散功能 |
| `_` | “忽略”模式绑定；也用于使整数文字可读 |

表 B-3 显示了出现在模块路径上下文中的符号
项目的层次结构。

<span class="caption">表 B-3：路径相关语法</span>

|符号|说明|
| --------------------------------------- | --------------------------------------------------------------------------------------------------------------------------|
| `ident::ident` |命名空间路径 |
| `::path` |相对于 crate 根的路径（即明确的绝对路径）|
| `self::path` |相对于当前模块的路径（即显式相对路径） |
| `super::path` |相对于当前模块的父模块的路径 |
| `type::ident`、`<type as trait>::ident` |相关常量、函数和类型 |
| `<type>::...` |无法直接命名的类型的关联项（例如，`<&T>::...`、`<[T]>::...` 等）|
| `trait::method(...)` |通过命名定义方法调用的特征来消除方法调用的歧义 |
| `type::method(...)` |通过命名定义方法的类型来消除方法调用的歧义 |
| `<type as trait>::method(...)` |通过命名特征和类型来消除方法调用的歧义 |

表 B-4 显示了使用泛型类型上下文中出现的符号
参数。

<span class="caption">表 B-4：泛型</span>

|符号|说明|
| ------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `path<...>` |将参数指定为类型中的泛型类型（例如`Vec<u8>`） |
| `path::<...>`、`method::<...>` |指定表达式中泛型类型、函数或方法的参数；通常称为 _turbofish_（例如，`"42".parse::<i32>()`） |
| `fn ident<...> ...` |定义泛型函数 |
| `struct ident<...> ...` |定义通用结构|
| `enum ident<...> ...` |定义泛型枚举 |
| `impl<...> ...` |定义通用实现 |
| `for<...> type` |排名更高的生命周期 |
| `type<ident=type>` |一种泛型类型，其中一个或多个关联类型具有特定的赋值（例如，`Iterator<Item=T>`） |

表 B-5 显示了约束泛型类型上下文中出现的符号
具有特征边界的参数。

<span class="caption">表 B-5：特质绑定约束</span>

|符号|说明|
| -------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `T: U` |通用参数 `T` 约束为实现 `U` 的类型 |
| `T: 'a` |泛型类型 `T` 的生命周期必须比 `'a` 的生命周期长（这意味着该类型不能传递包含生命周期短于 `'a` 的任何引用） |
| `T: 'static` |通用类型 `T` 不包含除 `'static` 以外的借用引用 |
| `'b: 'a` |通用生命周期 `'b` 必须比生命周期 `'a` | 长
| `T: ?Sized` |允许泛型类型参数是动态调整大小的类型 |
| `'a + trait`、`trait + trait` |复合类型约束|

表 B-6 显示了在调用或定义上下文中出现的符号
宏并指定项目的属性。

<span class="caption">表 B-6：宏和属性</span>

|符号|说明|
| ------------------------------------------- | ------------------ |
| `#[meta]` |外属性 |
| `#![meta]` |内在属性|
| `$ident` |宏替换 |
| `$ident:kind` |宏元变量 |
| `$(...)...` |宏重复|
| `ident!(...)`、`ident!{...}`、`ident![...]` |宏调用|

表 B-7 显示了创建注释的符号。

<span class="caption">表 B-7：注释</span>

|符号|说明|
| ---------- | ----------------------- |
| `//` |行评论|
| `//!` |内线文档评论 |
| `///` |外线文档评论 |
| `/*...*/` |块评论 |
| `/*!...*/` |内块文档评论 |
| `/**...*/` |外块文档评论 |

表 B-8 显示了使用括号的上下文。

<span class="caption">表 B-8：括号</span>

|符号|说明|
| ------------------------ | ---------------------------------------------------------------------------------------------------------- |
| `()` |空元组（又名单元），文字和类型 |
| `(expr)` |带括号的表达式 |
| `(expr,)` |单元素元组表达式 |
| `(type,)` |单元素元组类型 |
| `(expr, ...)` |元组表达式 |
| `(type, ...)` |元组类型 |
| `expr(expr, ...)` |函数调用表达式；也用于初始化元组`struct`s 和元组`enum` 变体 |

表 B-9 显示了使用大括号的上下文。

<span class="caption">表 B-9：大括号</span>

|背景 |说明|
| ------------ | ---------------- |
| `{...}` |块表达式|
| `Type {...}` |结构字面量 |

表 B-10 显示了使用方括号的上下文。

<span class="caption">表 B-10：方括号</span>

|背景 |说明|
| -------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------- |
| `[...]` |数组字面量 |
| `[expr; len]` |包含 `len` `expr` 副本的数组文字 |
| `[type; len]` |包含 `type` 的 `len` 实例的数组类型 |
| `expr[expr]` |集合索引；可重载（`Index`，`IndexMut`）|
| `expr[..]`、`expr[a..]`、`expr[..b]`、`expr[a..b]` |冒充集合切片的集合索引，使用 `Range`、`RangeFrom`、`RangeTo` 或 `RangeFull` 作为“索引” |
